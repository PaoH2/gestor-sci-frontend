<!-- Contenedor Principal (Sin Navbar/Sidebar) -->
<div class="main-layout">
  <div class="content-card">

    <!-- Encabezado -->
    <div class="page-header">
      <div class="header-left">
        <button type="button" class="btn-back" (click)="goBack()" title="Regresar">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-left-circle-fill" viewBox="0 0 16 16">
            <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0m3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5z"/>
          </svg>
          <span>Regresar</span>
        </button>
        <h2 class="page-title">
          <i class="bi bi-receipt me-2"></i>Historial de Ventas
        </h2>
      </div>
    </div>

    <!-- Indicador de Carga -->
    <div *ngIf="isLoading" class="loading-container">
      <div class="spinner-border text-primary-custom" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
      <p class="mt-2 text-muted">Cargando registros de ventas...</p>
    </div>

    <!-- Tabla de Ventas -->
    <div *ngIf="!isLoading" class="table-responsive custom-scrollbar">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-head-custom">
          <tr>
            <th scope="col" class="ps-4">Folio</th>
            <th scope="col">Fecha</th>
            <th scope="col">Vendedor</th>
            <th scope="col" class="text-end">Total</th>
            <th scope="col" class="text-center pe-4">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let venta of ventas">
            <!-- Folio -->
            <td class="ps-4">
              <span class="badge bg-light text-primary-custom border">
                #{{ venta.folio }}
              </span>
            </td>

            <!-- Fecha -->
            <td class="text-muted">
              {{ venta.fecha | date:'dd/MM/yyyy h:mm a' }}
            </td>

            <!-- Vendedor -->
            <td>
              <div class="d-flex align-items-center gap-2">
                <i class="bi bi-person-circle text-muted"></i>
                <span class="fw-500">{{ venta.Usuario }}</span>
              </div>
            </td>

            <!-- Total -->
            <td class="text-end fw-bold text-success-dark">
              {{ venta.total | currency }}
            </td>

            <!-- Acciones -->
            <td class="text-center pe-4">
              <button class="btn btn-sm btn-outline-secondary" (click)="reimprimirTicket(venta)" title="Reimprimir Ticket">
                <i class="bi bi-printer-fill me-1"></i> Ticket
              </button>
            </td>
          </tr>

          <!-- Estado VacÃ­o -->
          <tr *ngIf="ventas.length === 0">
            <td colspan="5" class="text-center py-5 text-muted">
              <i class="bi bi-receipt-cutoff display-4 d-block mb-3 opacity-25"></i>
              No hay ventas registradas en el sistema.
            </td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>
</div>
